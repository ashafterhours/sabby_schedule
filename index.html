<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>My Term Schedule</title>
  <!-- Tailwind CSS CDN for styling -->
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body {
      font-family: 'Inter', sans-serif;
    }
    /* Custom grid for desktop view */
    .grid-cols-6-custom {
      display: grid;
      grid-template-columns: 1fr repeat(5, 1fr);
    }
  </style>
</head>
<body class="min-h-screen bg-pink-100 p-4 text-fuchsia-900 antialiased">

  <div class="container mx-auto p-6 bg-white rounded-3xl shadow-xl">
    <!-- Tab buttons -->
    <div class="flex justify-center mb-6">
      <button id="fall-tab" class="px-6 py-2 rounded-l-full text-lg font-bold transition-colors duration-300 bg-fuchsia-300 text-fuchsia-900 shadow-inner">
        Fall Schedule
      </button>
      <button id="winter-tab" class="px-6 py-2 rounded-r-full text-lg font-bold transition-colors duration-300 bg-pink-100 text-fuchsia-600">
        Winter Schedule
      </button>
    </div>

    <h1 class="text-4xl font-bold mb-6 text-center text-fuchsia-600">
      My <span id="schedule-title-term">Fall</span> Term Schedule ðŸ’‹
    </h1>

    <!-- MOBILE VIEW (Hidden on medium screens and up) -->
    <div id="mobile-schedule-view" class="md:hidden">
      <!-- Course details display area for mobile -->
      <div id="course-details-container-mobile" class="mb-6 p-4 bg-fuchsia-100 rounded-xl shadow-lg hidden">
        <h2 class="text-xl font-bold mb-2">Selected Course Details</h2>
        <p><span class="font-semibold">Course:</span> <span id="details-course-name-mobile"></span></p>
        <p><span class="font-semibold">Professor:</span> <span id="details-professor-mobile"></span></p>
        <p><span class="font-semibold">Time:</span> <span id="details-time-mobile"></span></p>
        <p><span class="font-semibold">Location:</span> <span id="details-location-mobile"></span></p>
      </div>

      <div id="mobile-days-container" class="space-y-4">
        <!-- Day cards will be generated here -->
      </div>
    </div>

    <!-- DESKTOP VIEW (Hidden on mobile screens) -->
    <div id="desktop-schedule-view" class="hidden md:block">
      <!-- The main schedule grid -->
      <div class="relative overflow-x-auto border-2 border-fuchsia-200 rounded-2xl shadow-inner">
        <!-- Header row for days -->
        <div class="grid-cols-6-custom sticky top-0 bg-fuchsia-100 z-10 border-b-2 border-fuchsia-200">
          <div class="p-2 pr-4 text-right font-bold text-sm text-fuchsia-800 border-r-2 border-fuchsia-200">Time</div>
          <div class="p-2 text-center font-bold text-sm text-fuchsia-800 border-r-2 border-fuchsia-200">Monday</div>
          <div class="p-2 text-center font-bold text-sm text-fuchsia-800 border-r-2 border-fuchsia-200">Tuesday</div>
          <div class="p-2 text-center font-bold text-sm text-fuchsia-800 border-r-2 border-fuchsia-200">Wednesday</div>
          <div class="p-2 text-center font-bold text-sm text-fuchsia-800 border-r-2 border-fuchsia-200">Thursday</div>
          <div class="p-2 text-center font-bold text-sm text-fuchsia-800">Friday</div>
        </div>

        <div class="grid-cols-6-custom relative">
          <!-- Time labels column -->
          <div class="col-span-1 border-r-2 border-fuchsia-200 relative z-0">
            <!-- The time slots will be generated by JavaScript -->
            <div id="time-labels-container-desktop"></div>
          </div>

          <!-- Main grid cells -->
          <div id="schedule-grid-container-desktop" class="col-span-5 grid grid-cols-5 relative">
            <!-- Vertical and horizontal lines will be generated here -->
          </div>
        </div>
      </div>
      
      <!-- Course details display area for desktop -->
      <div id="course-details-container-desktop" class="mt-6 p-4 bg-fuchsia-100 rounded-xl shadow-lg hidden">
        <h2 class="text-xl font-bold mb-2">Selected Course Details</h2>
        <p><span class="font-semibold">Course:</span> <span id="details-course-name-desktop"></span></p>
        <p><span class="font-semibold">Professor:</span> <span id="details-professor-desktop"></span></p>
        <p><span class="font-semibold">Time:</span> <span id="details-time-desktop"></span></p>
        <p><span class="font-semibold">Location:</span> <span id="details-location-desktop"></span></p>
      </div>
    </div>
  </div>

  <script>
    document.addEventListener('DOMContentLoaded', () => {
      // Data for Fall and Winter schedules
      const fallSchedule = [
        { id: 'arch1', courseName: 'Invitation to Archaeology', day: 'Monday', startTime: '11:30', endTime: '12:50', location: 'SB106', fullLocation: 'Schlegel Building, SB106', color: 'bg-rose-200 text-rose-900', professor: 'Scott Gallimore' },
        { id: 'arch2', courseName: 'Invitation to Archaeology', day: 'Wednesday', startTime: '11:30', endTime: '12:50', location: 'SB106', fullLocation: 'Schlegel Building, SB106', color: 'bg-rose-200 text-rose-900', professor: 'Scott Gallimore' },
        { id: 'earth1', courseName: 'The Anatomy of Earth', day: 'Tuesday', startTime: '13:00', endTime: '13:50', location: 'P110A/110B', fullLocation: 'Peters Building, P110A/110B', color: 'bg-purple-200 text-purple-900', professor: 'Jason Venkite swaran' },
        { id: 'earth2', courseName: 'The Anatomy of Earth', day: 'Thursday', startTime: '13:00', endTime: '13:50', location: 'P110A/110B', fullLocation: 'Peters Building, P110A/110B', color: 'bg-purple-200 text-purple-900', professor: 'Jason Venkite swaran' },
        { id: 'earth3', courseName: 'The Anatomy of Earth', day: 'Wednesday', startTime: '14:30', endTime: '16:20', location: '3E14', fullLocation: 'Arts Building, 3E14', color: 'bg-lime-200 text-lime-900', professor: 'Jason Venkite swaran' },
        { id: 'psych1', courseName: 'Introduction to Psychology I', day: 'Monday', startTime: '17:30', endTime: '18:50', location: 'BA201', fullLocation: 'Bricker Academic Building, BA201', color: 'bg-fuchsia-200 text-fuchsia-900', professor: 'Lawrence Murphy' },
        { id: 'psych2', courseName: 'Introduction to Psychology I', day: 'Wednesday', startTime: '17:30', endTime: '18:50', location: 'BA201', fullLocation: 'Bricker Academic Building, BA201', color: 'bg-fuchsia-200 text-fuchsia-900', professor: 'Lawrence Murphy' },
        { id: 'crim1', courseName: 'Introduction to Criminology', day: 'Tuesday', startTime: '20:30', endTime: '21:50', location: 'LH3094', fullLocation: 'Lazaridis Hall, LH3094', color: 'bg-blue-200 text-blue-900', professor: 'Jorge Vladimir Castaneda' },
        { id: 'crim2', courseName: 'Introduction to Criminology', day: 'Thursday', startTime: '20:30', endTime: '21:50', location: 'LH3094', fullLocation: 'Lazaridis Hall, LH3094', color: 'bg-blue-200 text-blue-900', professor: 'Jorge Vladimir Castaneda' },
      ];

      const winterSchedule = [
        { id: 'cult1', courseName: 'Culture, Conflict, Development', day: 'Monday', startTime: '10:30', endTime: '12:20', location: 'BA101', fullLocation: 'Bricker Academic Building, BA101', color: 'bg-emerald-200 text-emerald-900', professor: 'John Boye Ejobowah' },
        { id: 'cult2', courseName: 'Culture, Conflict, Dev. (Tutorial)', day: 'Friday', startTime: '14:30', endTime: '15:20', location: '2-105', fullLocation: 'Dr. Alvin Woods Building, 2-105', color: 'bg-cyan-200 text-cyan-900', professor: 'Theresa Romkey' },
        { id: 'lit1', courseName: 'Enriched Literary Studies', day: 'Monday', startTime: '14:30', endTime: '16:20', location: 'BA101', fullLocation: 'Bricker Academic Building, BA101', color: 'bg-fuchsia-300 text-fuchsia-900', professor: 'Lauren Weindling' },
        { id: 'lit2', courseName: 'Enriched Literary Studies (Tutorial)', day: 'Thursday', startTime: '18:00', endTime: '18:50', location: 'MLU101B', fullLocation: 'Martin Luther University College, MLU101B', color: 'bg-amber-200 text-amber-900', professor: 'Lauren Weindling' },
        { id: 'rome1', courseName: 'Ancient Rome: Not Just Caesar', day: 'Tuesday', startTime: '16:00', endTime: '17:20', location: 'BA102', fullLocation: 'Bricker Academic Building, BA102', color: 'bg-indigo-200 text-indigo-900', professor: 'Kristin Oressa Lord' },
        { id: 'rome2', courseName: 'Ancient Rome: Not Just Caesar', day: 'Thursday', startTime: '16:00', endTime: '17:20', location: 'BA102', fullLocation: 'Bricker Academic Building, BA102', color: 'bg-indigo-200 text-indigo-900', professor: 'Kristin Oressa Lord' },
        { id: 'women1', courseName: 'Intro: Women & Gender Studies', day: 'Monday', startTime: '17:30', endTime: '18:50', location: 'BA102', fullLocation: 'Bricker Academic Building, BA102', color: 'bg-pink-200 text-pink-900', professor: 'Lorraine Denise Vander Hoef' },
        { id: 'women2', courseName: 'Intro: Women & Gender Studies', day: 'Wednesday', startTime: '17:30', endTime: '18:50', location: 'BA102', fullLocation: 'Bricker Academic Building, BA102', color: 'bg-pink-200 text-pink-900', professor: 'Lorraine Denise Vander Hoef' },
        { id: 'psych3', courseName: 'Introduction to Psychology II', day: 'Tuesday', startTime: '13:00', endTime: '14:20', location: 'LH1001', fullLocation: 'Lazaridis Hall, LH1001', color: 'bg-violet-200 text-violet-900', professor: 'Alexis Edith Isabel Buettgen' },
        { id: 'psych4', courseName: 'Introduction to Psychology II', day: 'Thursday', startTime: '13:00', endTime: '14:20', location: 'LH1001', fullLocation: 'Lazaridis Hall, LH1001', color: 'bg-violet-200 text-violet-900', professor: 'Alexis Edith Isabel Buettgen' },
      ];

      // DOM element references
      const fallTab = document.getElementById('fall-tab');
      const winterTab = document.getElementById('winter-tab');
      const scheduleTitle = document.getElementById('schedule-title-term');

      // Desktop DOM elements
      const desktopView = document.getElementById('desktop-schedule-view');
      const scheduleGridContainerDesktop = document.getElementById('schedule-grid-container-desktop');
      const timeLabelsContainerDesktop = document.getElementById('time-labels-container-desktop');
      const courseDetailsContainerDesktop = document.getElementById('course-details-container-desktop');
      const detailsCourseNameDesktop = document.getElementById('details-course-name-desktop');
      const detailsProfessorDesktop = document.getElementById('details-professor-desktop');
      const detailsTimeDesktop = document.getElementById('details-time-desktop');
      const detailsLocationDesktop = document.getElementById('details-location-desktop');

      // Mobile DOM elements
      const mobileView = document.getElementById('mobile-schedule-view');
      const mobileDaysContainer = document.getElementById('mobile-days-container');
      const courseDetailsContainerMobile = document.getElementById('course-details-container-mobile');
      const detailsCourseNameMobile = document.getElementById('details-course-name-mobile');
      const detailsProfessorMobile = document.getElementById('details-professor-mobile');
      const detailsTimeMobile = document.getElementById('details-time-mobile');
      const detailsLocationMobile = document.getElementById('details-location-mobile');

      const days = ['Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday'];
      const timeSlots30Min = Array.from({ length: 25 }, (_, i) => {
        const hour = Math.floor(9 + i / 2);
        const minute = i % 2 === 0 ? '00' : '30';
        return `${hour.toString().padStart(2, '0')}:${minute}`;
      });

      // Helper function to convert 24-hour time to 12-hour AM/PM format
      const formatTime = (timeString) => {
        const [hour, minute] = timeString.split(':');
        const hourInt = parseInt(hour, 10);
        const suffix = hourInt >= 12 ? 'PM' : 'AM';
        const formattedHour = ((hourInt + 11) % 12) + 1;
        return `${formattedHour}:${minute} ${suffix}`;
      };

      // Desktop rendering functions
      const calculateCourseBlockStyle = (course) => {
        const [startHour, startMinute] = course.startTime.split(':').map(Number);
        const [endHour, endMinute] = course.endTime.split(':').map(Number);
        
        const blockHeightPx = 32;
        const gridStartMinutes = 9 * 60;

        const totalStartMinutes = startHour * 60 + startMinute;
        const totalEndMinutes = endHour * 60 + endMinute;
        
        const topOffsetMinutes = totalStartMinutes - gridStartMinutes;
        const heightInMinutes = totalEndMinutes - totalStartMinutes;

        const top = (topOffsetMinutes / 30) * blockHeightPx;
        const height = (heightInMinutes / 30) * blockHeightPx;

        const left = days.indexOf(course.day) * (100 / days.length);
        const width = (100 / days.length);

        return `top: ${top}px; height: ${height}px; left: ${left}%; width: ${width}%;`;
      };
      
      const renderDesktopSchedule = (schedule) => {
        scheduleGridContainerDesktop.innerHTML = '';
        courseDetailsContainerDesktop.classList.add('hidden');

        // Render the background grid lines
        let gridHtml = '';
        for (let i = 0; i < 5; i++) { // For each day
          gridHtml += `<div class="relative border-r-2 border-fuchsia-100 last:border-r-0">`;
          for (let j = 0; j < timeSlots30Min.length; j++) { // For each time slot
            gridHtml += `<div class="h-8 border-b-2 border-fuchsia-100"></div>`;
          }
          gridHtml += `</div>`;
        }
        scheduleGridContainerDesktop.innerHTML = gridHtml;

        // Render the course blocks
        schedule.forEach(course => {
          const courseBlock = document.createElement('div');
          courseBlock.className = `absolute rounded-lg p-1 text-xs shadow-md overflow-hidden cursor-pointer ${course.color}`;
          courseBlock.setAttribute('data-course-id', course.id);
          courseBlock.style = calculateCourseBlockStyle(course);
          
          courseBlock.innerHTML = `
            <div class="font-bold">${course.courseName}</div>
            <div>${formatTime(course.startTime)} - ${formatTime(course.endTime)}</div>
            <div>${course.location}</div>
          `;
          
          scheduleGridContainerDesktop.appendChild(courseBlock);
        });
      };

      const renderDesktopTimeLabels = () => {
        let labelsHtml = '';
        timeSlots30Min.forEach((time, index) => {
          labelsHtml += `
            <div class="h-8 text-right pr-2 text-sm font-bold text-fuchsia-800 border-b-2 border-fuchsia-100">
              ${index % 2 === 0 ? formatTime(time) : ''}
            </div>
          `;
        });
        timeLabelsContainerDesktop.innerHTML = labelsHtml;
      };

      const displayDesktopCourseDetails = (course) => {
        detailsCourseNameDesktop.textContent = course.courseName;
        detailsProfessorDesktop.textContent = course.professor;
        detailsTimeDesktop.textContent = `${formatTime(course.startTime)} - ${formatTime(course.endTime)}`;
        detailsLocationDesktop.textContent = course.fullLocation;
        courseDetailsContainerDesktop.classList.remove('hidden');
      };
      
      // Mobile rendering functions
      const renderMobileSchedule = (schedule) => {
        mobileDaysContainer.innerHTML = '';
        courseDetailsContainerMobile.classList.add('hidden');

        days.forEach(day => {
          const coursesForDay = schedule.filter(course => course.day === day);
          if (coursesForDay.length > 0) {
            let dayCardHtml = `
              <div class="bg-fuchsia-50 rounded-xl p-4 shadow-md">
                <h3 class="text-xl font-bold mb-3 text-fuchsia-700">${day}</h3>
                <div class="space-y-3">
            `;
            coursesForDay.forEach(course => {
              dayCardHtml += `
                <div class="rounded-lg p-3 shadow-sm cursor-pointer ${course.color}" data-course-id="${course.id}">
                  <div class="font-bold text-base">${course.courseName}</div>
                  <div class="text-sm">${formatTime(course.startTime)} - ${formatTime(course.endTime)}</div>
                  <div class="text-xs">${course.location}</div>
                </div>
              `;
            });
            dayCardHtml += `
                </div>
              </div>
            `;
            mobileDaysContainer.innerHTML += dayCardHtml;
          }
        });
      };

      const displayMobileCourseDetails = (course) => {
        detailsCourseNameMobile.textContent = course.courseName;
        detailsProfessorMobile.textContent = course.professor;
        detailsTimeMobile.textContent = `${formatTime(course.startTime)} - ${formatTime(course.endTime)}`;
        detailsLocationMobile.textContent = course.fullLocation;
        courseDetailsContainerMobile.classList.remove('hidden');
      };

      // Handle tab clicks
      const handleTabClick = (scheduleName) => {
        const schedule = scheduleName === 'fall' ? fallSchedule : winterSchedule;
        
        renderDesktopSchedule(schedule);
        renderMobileSchedule(schedule);
        
        scheduleTitle.textContent = scheduleName.charAt(0).toUpperCase() + scheduleName.slice(1);
        
        if (scheduleName === 'fall') {
          fallTab.classList.add('bg-fuchsia-300', 'text-fuchsia-900', 'shadow-inner');
          fallTab.classList.remove('bg-pink-100', 'text-fuchsia-600');
          winterTab.classList.remove('bg-fuchsia-300', 'text-fuchsia-900', 'shadow-inner');
          winterTab.classList.add('bg-pink-100', 'text-fuchsia-600');
        } else {
          winterTab.classList.add('bg-fuchsia-300', 'text-fuchsia-900', 'shadow-inner');
          winterTab.classList.remove('bg-pink-100', 'text-fuchsia-600');
          fallTab.classList.remove('bg-fuchsia-300', 'text-fuchsia-900', 'shadow-inner');
          fallTab.classList.add('bg-pink-100', 'text-fuchsia-600');
        }
      };

      fallTab.addEventListener('click', () => handleTabClick('fall'));
      winterTab.addEventListener('click', () => handleTabClick('winter'));

      // Event delegation for desktop course block clicks
      scheduleGridContainerDesktop.addEventListener('click', (event) => {
        const courseBlock = event.target.closest('[data-course-id]');
        if (courseBlock) {
          const courseId = courseBlock.getAttribute('data-course-id');
          const currentSchedule = scheduleTitle.textContent === 'Fall' ? fallSchedule : winterSchedule;
          const selectedCourse = currentSchedule.find(course => course.id === courseId);
          if (selectedCourse) {
            displayDesktopCourseDetails(selectedCourse);
          }
        }
      });
      
      // Event delegation for mobile course block clicks
      mobileDaysContainer.addEventListener('click', (event) => {
        const courseBlock = event.target.closest('[data-course-id]');
        if (courseBlock) {
          const courseId = courseBlock.getAttribute('data-course-id');
          const currentSchedule = scheduleTitle.textContent === 'Fall' ? fallSchedule : winterSchedule;
          const selectedCourse = currentSchedule.find(course => course.id === courseId);
          if (selectedCourse) {
            displayMobileCourseDetails(selectedCourse);
          }
        }
      });

      // Initial render on page load
      renderDesktopTimeLabels();
      handleTabClick('fall');
    });
  </script>

</body>
</html>
